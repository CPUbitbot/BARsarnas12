<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Sistem Manajemen Jadwal BASARNAS</title>

<style>
:root {
  --bg: #f4f6f8;
  --card: #ffffff;
  --text: #1f2937;
  --primary: #ff6a00;
  --border: #e5e7eb;
}

body.dark {
  --bg: #0f172a;
  --card: #1e293b;
  --text: #e5e7eb;
  --border: #334155;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: var(--bg);
  color: var(--text);
  transition: 0.3s;
}

header {
  background: linear-gradient(135deg, #ff6a00, #cc5500);
  color: white;
  padding: 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.toggle {
  background: rgba(255,255,255,0.2);
  border: none;
  color: white;
  padding: 8px 14px;
  border-radius: 20px;
  cursor: pointer;
}

main {
  max-width: 1100px;
  margin: 24px auto;
  padding: 0 16px;
  display: grid;
  gap: 24px;
}

.card {
  background: var(--card);
  padding: 20px;
  border-radius: 16px;
  border: 1px solid var(--border);
}

.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
}

.stat {
  font-size: 1.8rem;
  font-weight: bold;
}

input, select, textarea {
  width: 100%;
  padding: 10px;
  margin-top: 8px;
  margin-bottom: 12px;
  border-radius: 8px;
  border: 1px solid var(--border);
}

button.primary {
  width: 100%;
  padding: 12px;
  border: none;
  border-radius: 10px;
  background: var(--primary);
  color: white;
  font-weight: bold;
  cursor: pointer;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}

th, td {
  padding: 12px;
  border-bottom: 1px solid var(--border);
  text-align: left;
}

.badge {
  padding: 4px 10px;
  border-radius: 20px;
  color: white;
  font-size: 12px;
}

.aktif { background: #16a34a; }
.selesai { background: #64748b; }
.darurat { background: #dc2626; }

</style>
</head>
<body>

<header>
  <h1>Sistem Manajemen Jadwal BASARNAS</h1>
  <button class="toggle" onclick="toggleMode()">üåô / ‚òÄÔ∏è</button>
</header>

<main>

<div class="grid">
  <div class="card"><h3>Total</h3><div id="total" class="stat">0</div></div>
  <div class="card"><h3>Aktif</h3><div id="aktif" class="stat">0</div></div>
  <div class="card"><h3>Selesai</h3><div id="selesai" class="stat">0</div></div>
  <div class="card"><h3>Darurat</h3><div id="darurat" class="stat">0</div></div>
</div>

<div class="card">
  <h2>Tambah Jadwal</h2>
  <input id="petugas" placeholder="Nama Petugas">
  <select id="tugas">
    <option>Siaga</option>
    <option>Operasi SAR</option>
    <option>Pelatihan</option>
    <option>Administrasi</option>
  </select>
  <select id="status">
    <option value="aktif">Aktif</option>
    <option value="selesai">Selesai</option>
    <option value="darurat">Darurat</option>
  </select>
  <input type="date" id="tanggal">
  <input type="time" id="waktu">
  <textarea id="keterangan" placeholder="Keterangan"></textarea>
  <button class="primary" onclick="tambahJadwal()">Simpan</button>
</div>

<div class="card">
  <h2>Daftar Jadwal</h2>
  <table>
    <thead>
      <tr>
        <th>Petugas</th>
        <th>Tugas</th>
        <th>Status</th>
        <th>Tanggal</th>
        <th>Waktu</th>
        <th>Keterangan</th>
      </tr>
    </thead>
    <tbody id="tabel"></tbody>
  </table>
</div>

</main>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyC9KcmCJKA6spKGlixDLo1HvdFt555HiX8",
  authDomain: "basarnas-a8299.firebaseapp.com",
  databaseURL: "https://basarnas-a8299-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "basarnas-a8299",
  storageBucket: "basarnas-a8299.firebasestorage.app",
  messagingSenderId: "813421187349",
  appId: "1:813421187349:web:e376c4a6250df47af6991c"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const jadwalRef = ref(db, "jadwal");

window.tambahJadwal = function () {
  push(jadwalRef, {
    petugas: document.getElementById("petugas").value,
    tugas: document.getElementById("tugas").value,
    status: document.getElementById("status").value,
    tanggal: document.getElementById("tanggal").value,
    waktu: document.getElementById("waktu").value,
    ket: document.getElementById("keterangan").value
  });
};

onValue(jadwalRef, (snapshot) => {
  const data = snapshot.val();
  render(data);
});

function render(data) {
  const tbody = document.getElementById("tabel");
  tbody.innerHTML = "";

  if (!data) return;

  let count = { total:0, aktif:0, selesai:0, darurat:0 };

  Object.values(data).forEach(d => {
    count.total++;
    count[d.status]++;

    const row = tbody.insertRow();
    row.innerHTML = `
      <td>${d.petugas}</td>
      <td>${d.tugas}</td>
      <td><span class="badge ${d.status}">${d.status}</span></td>
      <td>${d.tanggal}</td>
      <td>${d.waktu}</td>
      <td>${d.ket}</td>
    `;
  });

  document.getElementById("total").innerText = count.total;
  document.getElementById("aktif").innerText = count.aktif;
  document.getElementById("selesai").innerText = count.selesai;
  document.getElementById("darurat").innerText = count.darurat;
}

window.toggleMode = function () {
  document.body.classList.toggle("dark");
};

</script>

</body>
</html>
